<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>PAYTROLL — Login</title>
  <style>
    :root{
      --purple-1:#0b0817; --purple-2:#140b2b; --purple-3:#24104a; --purple-4:#3b177a; --text:#fff;
      --border:rgba(255,255,255,.20); --btn:#2563eb; --btn-hover:#1d4ed8; --radius:14px;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{
      margin:0; font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Inter,sans-serif; color:var(--text);
      background:
        radial-gradient(900px 600px at 20% 20%, rgba(109,40,217,.22), transparent 60%),
        radial-gradient(800px 560px at 80% 80%, rgba(109,40,217,.16), transparent 60%),
        linear-gradient(135deg, var(--purple-1) 0%, var(--purple-2) 25%, var(--purple-3) 55%, var(--purple-4) 80%, #000 100%);
      background-attachment:fixed;
    }
    .wrap{min-height:100dvh; display:grid; place-items:center; padding:16px}
    .sheet{
      width:min(92vw, 480px);
      border-radius:20px;
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid var(--border);
      box-shadow:0 24px 90px rgba(0,0,0,.5), inset 0 1px 0 rgba(255,255,255,.12);
      backdrop-filter: blur(12px) saturate(120%); -webkit-backdrop-filter: blur(12px) saturate(120%);
      overflow:hidden; animation:floatIn .45s ease-out both;
    }
    @keyframes floatIn{from{opacity:0; transform:translateY(14px) scale(.985)}to{opacity:1; transform:translateY(0) scale(1)}}
    .panel-inner{ padding:24px 20px 26px }
    @media (min-width:520px){ .panel-inner{ padding:26px 24px 30px } }

    .brand{display:flex; align-items:center; justify-content:space-between; margin-bottom:12px}
    .brand .logo{font-weight:900; letter-spacing:.5px; font-size:18px}
    .brand .to-signup{
      background:rgba(255,255,255,.10); padding:8px 12px; border-radius:999px; border:1px solid var(--border);
      font-weight:600; color:#fff; text-decoration:none; font-size:13px
    }
    .brand .to-signup:hover{background:rgba(255,255,255,.16)}

    .card-form{background:#fff; color:#0b1220; border-radius:var(--radius); padding:22px; box-shadow:0 14px 48px rgba(0,0,0,.22)}
    @media (min-width:520px){ .card-form{padding:24px} }
    .title{font-size:26px; font-weight:800; margin:0 0 8px}
    .sub{color:#4b5563; margin:0 0 16px; font-size:13px}

    .grid{display:grid; gap:10px}
    label{font-size:12px; color:#334155; font-weight:700}
    .input{
      margin-top:6px; display:flex; align-items:center; gap:8px;
      background:#f8fafc; border:1px solid #e5e7eb; border-radius:10px; padding:10px 12px;
      transition:border .2s, box-shadow .2s;
    }
    .input:focus-within{border-color:#93c5fd; box-shadow:0 0 0 3px rgba(37,99,235,.14)}
    .input input{border:0; outline:0; background:transparent; width:100%; font-size:14px; color:#0b1220}
    .pw-toggle{cursor:pointer; user-select:none; font-size:12px; color:#2563eb; font-weight:700}

    .actions{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:4px}
    .remember{display:flex; align-items:center; gap:8px; color:#475569; font-size:13px}
    .remember input{width:16px; height:16px}
    .link{font-size:12px; color:#2563eb; font-weight:700; text-decoration:none}

    .btn{
      appearance:none; border:0; cursor:pointer; border-radius:12px; padding:12px 16px; font-weight:800;
      background:var(--btn); color:#fff; transition:.2s; width:100%; font-size:15px;
      box-shadow:0 10px 28px rgba(37,99,235,.32)
    }
    .btn:hover{background:var(--btn-hover); transform:translateY(-1px)}
    .btn:active{transform:translateY(0)}
    .btn:disabled{opacity:.6; cursor:not-allowed}

    .foot{margin-top:14px; font-size:11px; color:#cbd5e1; text-align:center}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="sheet" role="region" aria-label="Log in">
      <div class="panel-inner">
        <div class="brand">
          <div class="logo">PAYTROLL</div>
          <a class="to-signup" href="signup.html">Create account</a>
        </div>

        <div class="card-form" role="form" aria-labelledby="title">
          <h1 id="title" class="title">Log in</h1>
          <p class="sub">Welcome back. Please enter your details.</p>

          <form id="login" action="#" method="post" novalidate>
            <div class="grid">
              <label>Email
                <div class="input"><input id="email" type="email" name="email" autocomplete="email" inputmode="email" required/></div>
              </label>

              <label>Password
                <div class="input">
                  <input id="pw" type="password" name="password" autocomplete="current-password" required/>
                  <span id="toggle" class="pw-toggle" aria-controls="pw" aria-pressed="false">Show</span>
                </div>
              </label>

              <div class="actions">
                <label class="remember">
                  <input type="checkbox" id="remember"/>
                  <span>Remember me</span>
                </label>
                <a class="link" href="#">Forgot password?</a>
              </div>

              <button class="btn" type="submit">Log in →</button>

              <div style="margin-top:10px;">
                <div id="g_id_onload"
                     data-client_id="YOUR_GOOGLE_CLIENT_ID"
                     data-context="signin"
                     data-ux_mode="popup"
                     data-callback="onGoogleSignIn"
                     data-auto_prompt="false"></div>
                <div class="g_id_signin"
                     data-type="standard"
                     data-size="large"
                     data-width="100%"
                     data-text="continue_with"
                     data-shape="pill"
                     data-theme="outline"></div>
              </div>

              <div class="foot">© 2025 PAYTROLL</div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <script>
    const toggle=document.getElementById('toggle');
    const pw=document.getElementById('pw');
    toggle?.addEventListener('click',()=>{
      const isPw=pw.type==='password';
      pw.type=isPw?'text':'password';
      toggle.textContent=isPw?'Hide':'Show';
      toggle.setAttribute('aria-pressed', String(isPw));
    });

    function onGoogleSignIn(){
      alert('Google sign-in token received. Connect Firebase to complete login.');
    }
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
    import {
      getAuth,
      setPersistence,
      browserLocalPersistence,
      browserSessionPersistence,
      signInWithEmailAndPassword
    } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDhZMh2GxUYmeZFA2l_gp5SCugLKCxAfPI",
      authDomain: "paytroll-ee598.firebaseapp.com",
      projectId: "paytroll-ee598",
      storageBucket: "paytroll-ee598.firebasestorage.app",
      messagingSenderId: "932912748301",
      appId: "1:932912748301:web:786063508d5b84fb498244",
      measurementId: "G-G6603S6Q91"
    };

    // Init
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const form = document.getElementById('login');
    form?.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const email = (document.getElementById('email')?.value||'').trim();
      const pass  = (document.getElementById('pw')?.value||'').trim();
      if(!email || !pass){ alert('Enter email & password.'); return; }

      const remember = document.getElementById('remember')?.checked;
      const persistence = remember ? browserLocalPersistence : browserSessionPersistence;

      const btn = form.querySelector('.btn');
      btn.disabled = true; const old = btn.textContent; btn.textContent = 'Logging in…';

      try{
        await setPersistence(auth, persistence);
        await signInWithEmailAndPassword(auth, email, pass);

        localStorage.setItem('userRole','user');
        localStorage.setItem('userEmail', email);

        window.location.href = 'dashboard.html';
      }catch(err){
        // common error mapping
        let msg = 'Login failed.';
        const code = err?.code || '';
        if(code.includes('invalid-credential') || code.includes('wrong-password')) msg = 'Invalid email or password.';
        else if(code.includes('user-not-found')) msg = 'No account found for this email.';
        else if(code.includes('too-many-requests')) msg = 'Too many attempts. Try again later.';
        alert(msg);
      }finally{
        btn.disabled = false; btn.textContent = old;
      }
    });
  </script>
</body>
</html>